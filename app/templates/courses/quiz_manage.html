{% extends "base.html" %}
{% block title %}ã‚¯ã‚¤ã‚ºç®¡ç† - {{ lesson.title }} - Learning SaaS{% endblock %}
{% block content %}
  <h1 class="h4 mb-3">ã‚¯ã‚¤ã‚ºç®¡ç†ï¼ˆ{{ lesson.title }}ï¼‰</h1>

  <p class="mb-3 d-flex flex-wrap gap-2">
    <a class="btn btn-primary btn-sm"
       href="{{ url_for('main.quiz_create', lesson_id=lesson.id) }}">
      ï¼‹ æ–°ã—ã„å•é¡Œã‚’è¿½åŠ 
    </a>

    <a class="btn btn-outline-primary btn-sm"
       href="{{ url_for('main.quiz_results_admin', lesson_id=lesson.id) }}">
      ğŸ“Š ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã®ã‚¯ã‚¤ã‚ºçµæœä¸€è¦§ã‚’è¦‹ã‚‹
    </a>

    <a class="btn btn-outline-secondary btn-sm"
       href="{{ url_for('main.lesson_detail', lesson_id=lesson.id) }}">
      ãƒ¬ãƒƒã‚¹ãƒ³ã«æˆ»ã‚‹
    </a>
  </p>

  {% if questions %}
    <ol class="list-group list-group-numbered">
      {% for q in questions %}
        <li class="list-group-item">
          <div class="d-flex justify-content-between align-items-start">
            <div class="me-3">
              <div class="mb-1">
                <strong>{{ q.sort_order }}. {{ q.question_text }}</strong>
              </div>
              <ul class="mb-1">
                {% for c in q.choices %}
                  <li>
                    {% if c.is_correct %}
                      <span class="badge bg-success me-1">æ­£è§£</span>
                    {% endif %}
                    {{ c.choice_text }}
                  </li>
                {% endfor %}
              </ul>
              {% if q.explanation %}
                <div class="small text-muted">
                  è§£èª¬: {{ q.explanation }}
                </div>
              {% endif %}
            </div>

            <div class="d-flex flex-column gap-2">
              <a href="{{ url_for('main.quiz_edit', question_id=q.id) }}"
                 class="btn btn-sm btn-outline-primary">
                ç·¨é›†
              </a>
              <form method="post"
                    action="{{ url_for('main.quiz_delete', question_id=q.id) }}"
                    onsubmit="return confirm('æœ¬å½“ã«ã“ã®å•é¡Œã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ');">
                <button type="submit" class="btn btn-sm btn-outline-danger">
                  å‰Šé™¤
                </button>
              </form>
            </div>
          </div>
        </li>
      {% endfor %}
    </ol>
  {% else %}
    <p>ã¾ã ã‚¯ã‚¤ã‚ºå•é¡ŒãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
  {% endif %}
{% endblock %}
